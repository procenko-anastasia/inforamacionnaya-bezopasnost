# Лабораторная работа №3: Асимметричное шифрование (RSA)

## Оглавление
1. [Назначение программы](#назначение-программы)
2. [Условия выполнения](#условия-выполнения)
3. [Описание задачи](#описание-задачи)
4. [Алгоритм решения](#алгоритм-решения)
5. [Функционирование программы](#функционирование-программы)
6. [Сообщения оператору](#сообщения-оператору)
7. [Выходные данные](#выходные-данные)
8. [Ошибки и решения](#ошибки-и-решения)
9. [Требования к документации](#требования-к-документации)
10. [Дополнительные сведения](#дополнительные-сведения)

---

## Назначение программы
Программа демонстрирует:
- Генерацию ключевой пары RSA
- Шифрование/дешифрование файлов

---

## Условия выполнения
**Требования:**
- Python 3.6+
- Библиотеки: `rsa`, `pycryptodome` (для некоторых реализаций)
  
**Установка:**
```bash
pip install rsa pycryptodome
```

В моем случе также использовалось виртуальное окружение:

```
python3 -m venv venv    
source venv/bin/activate
pip install rsa
```

---

## Описание задачи

Реализовать:

Генерацию ключевой пары (public/private)
Шифрование данных открытым ключом
Дешифрование закрытым ключом

---

## Алгоритм решения

**Генерация ключей:**
```python
(pubkey, privkey) = rsa.newkeys(512)
```
**Шифрование:**
```python
with open('secret.txt', 'rb') as f:
    data = f.read()

encrypted_data = rsa.encrypt(data, pubkey)

with open('secret_encrypted.txt', 'wb') as f:
    f.write(encrypted_data)
```
**Дешифрование:**
```python
with open('secret_encrypted.txt', 'rb') as f:
    encrypted_data = f.read()

decrypted_data = rsa.decrypt(encrypted_data, privkey)

with open('secret_decrypted.txt', 'wb') as f:
    f.write(decrypted_data)
```

---

## Функционирование программы

Структура файлов:

lab03_1.py - генерация ключей и шифрование данных
lab03_2.py - дешифрование данных

Пример работы:

```bash

$ python lab03_1.py  # Создает privkey.pem и pubkey.pem; шифрует secret.txt; Создает secret_encrypted.txt
$ python lab03_2.py  # Дешифрование файла secret.txt; Создает secret_decrypted.txt
```

---

## Сообщения оператору

Файл зашифрован и сохранен как 'secret_encrypted.txt'
Файл дешифрован и сохранен как 'secret_decrypted.txt'

---

## Выходные данные

Файлы ключей:
pubkey.pem - открытый ключ (PEM-формат)
privkey.pem - закрытый ключ (PEM-формат)
Зашифрованный файл secret_encrypted.txt
Расшифрованный файл secret_decrypted.txt

---

## Ошибки и решения

| Ошибка | Причина | Решение |
|--------|---------|---------|
| **`ModuleNotFoundError: No module named 'rsa'`** | Не установлена требуемая библиотека | `pip install rsa` |
| **`FileNotFoundError: key.pub not found`** | Отсутствует файл с ключом | Запустите сначала `lab03_1.py` для генерации ключей |
| **`rsa.DecryptionError: Decryption failed`** | Несоответствие ключей или повреждение данных | 1. Проверьте соответствие ключей<br>2. Перегенерируйте ключи |
| **`rsa.MessageTooLong`** | Размер данных превышает лимит RSA | Разбейте данные на блоки по 190 байт (для 2048-битного ключа) |
| **`PermissionError: [Errno 13]`** | Нет прав на запись/чтение файлов | 1. Проверьте права доступа<br>2. Запустите от имени администратора (не рекомендуется) |
| **`ValueError: Incorrect padding`** | Повреждение зашифрованных данных | 1. Проверьте целостность файлов<br>2. Используйте бинарный режим (`'wb'/'rb'`) |
| **`git push rejected`** | Конфликт с удалённым репозиторием | Выполните:<br>`git pull origin main`<br>`git push origin main` |
| **`InvalidToken (Fernet)`** | Неверный ключ для дешифрования | Убедитесь, что используется тот же ключ, что и при шифровании |

---
  
## Требования к документации

- Схема работы алгоритма RSA
- Примеры входных/выходных данных

---

## Дополнительные сведения

Эта программа является примером учебного кода и демонстрирует использование метода полного перебора для взлома слабозащищенных криптографических схем. В реальных условиях такой подход крайне неэффективен против современных методов шифрования.
