# Лабораторная работа №2: Шифрование данных с использованием алгоритма Fernet

## Оглавление
1. [Назначение программы](#назначение-программы)
2. [Условия выполнения программы](#условия-выполнения-программы)
3. [Описание задачи](#описание-задачи)
4. [Алгоритм решения задачи](#алгоритм-решения-задачи)
5. [Функционирование программы](#функционирование-программы)
6. [Тексты сообщений оператору](#тексты-сообщений-оператору)
7. [Выходная информация](#выходная-информация)
8. [Ошибки и аварийные ситуации](#ошибки-и-аварийные-ситуации)
9. [Требования к документации](#требования-к-документации)
10. [Дополнительные сведения](#дополнительные-сведения)

---

## Назначение программы
Программа предназначена для:
- Генерации криптографического ключа
- Шифрования/дешифрования текстовых данных
- Демонстрации работы симметричного шифрования (алгоритм Fernet)

---

## Условия выполнения программы
**Требования:**
- Python 3.7+
- Библиотека `cryptography`
- Файл `key.key` (создается автоматически)

**Установка зависимостей:**
```bash
pip install cryptography
```
В моем случае использовалось виртуальное окружение
```
python3 -m venv venv
source venv/bin/activate
pip install cryptography
```

---

## Описание задачи

**Реализовать программу, которая:**

- Генерирует ключ шифрования
- Шифрует введенный пользователем текст
- Дешифрует данные обратно в исходный текст

---

## Алгоритм решения задачи

**Генерация ключа:**
```python
key = Fernet.generate_key()
cipher = Fernet(key)
```
**Шифрование:**
```python
with open('secret.txt', 'rb') as f:
    data = f.read()

encrypted_data = cipher.encrypt(data)

with open('secret_encrypted.txt', 'wb') as f:
    f.write(encrypted_data)
```
**Дешифрование:**
```python
with open('secret_encrypted.txt', 'rb') as f:
    encrypted_data = f.read()

decrypted_data = cipher.decrypt(encrypted_data)

with open('secret_decrypted.txt', 'wb') as f:
    f.write(decrypted_data)
```

---


## Функционирование программы

- Создаем виртуальное окружение (пакеты не смешаются с системными)
- Запуск lab02_1.py:
  Создает файл key.key с ключом и шифрует текст
- Запуск lab02_2.py:
  Дешифрует текст
  
  Пример работы:

```bash
$ python lab02_1.py
[+] Ключ сохранён в key.key
Файл зашифрован и сохранен как 'secret_encrypted.txt'

$ python lab02_2.py
Файл дешифрован и сохранен как 'secret_decrypted.txt'
```

---

## Тексты сообщений оператору

- "[+] Ключ сохранён в key.key"
- "Файл зашифрован и сохранен как 'secret_encrypted.txt'"
- "Файл дешифрован и сохранен как 'secret_decrypted.txt'н"

---

## Выходная информация

Файл key.key (бинарный формат)
Зашифрованный текст (в secret_encrypted.txt)
Расшифрованный текст (в secret_decrypted.txt)

---

## Ошибки и аварийные ситуации


| Код/Тип ошибки               | Причина                                                                 | Решение                                                                 |
|------------------------------|-------------------------------------------------------------------------|-------------------------------------------------------------------------|
| **`FileNotFoundError: key.key`** | Файл с ключом не найден в директории                                   | 1. Запустите `lab02_1.py` для генерации ключа<br>2. Проверьте путь к файлу |
| **`InvalidToken`**           | Повреждённый ключ или несоответствие ключа зашифрованным данным       | 1. Удалите `key.key` и пересоздайте<br>2. Проверьте, не редактировался ли файл вручную |
| **`ModuleNotFoundError: cryptography`** | Библиотека не установлена                                          | Выполните: `pip install cryptography`                                  |
| **`PermissionError`**         | Нет прав на запись в директорию                                        | 1. Запустите скрипт с правами администратора (не рекомендуется)<br>2. Используйте `--user`: `pip install --user cryptography` |
| **`ValueError: Incorrect padding`** | Ошибка формата ключа                                               | 1. Проверьте, что ключ не повреждён<br>2. Перегенерируйте ключ         |
| **`TypeError: data must be bytes`** | Попытка шифрования не строковых данных                              | Преобразуйте текст: `message.encode()` перед шифрованием               |

---

## Требования к документации

- Описание алгоритма в README.md
- Примеры входных/выходных данных
- Дополнительные сведения

---

## Дополнительные сведения
Эта программа является примером учебного кода и демонстрирует использование метода полного перебора для взлома слабозащищенных криптографических схем. В реальных условиях такой подход крайне неэффективен против современных методов шифрования.

